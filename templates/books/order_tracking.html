{% extends 'books/base.html' %}
{% block content %}
<div class="container py-8">
    <h1 class="text-2xl font-bold mb-6">My Orders</h1>

    {% if orders %}
    <div class="flex flex-col gap-6">
        {% for order in orders %}
        <div class="card p-6">
            <div class="flex justify-between items-start mb-4 border-b pb-4 border-gray-100">
                <div>
                    <div class="text-sm text-muted">Order #{{ order.id }}</div>
                    <div class="font-bold text-lg">{{ order.created_at|date:"M d, Y" }}</div>
                </div>
                <div>
                    <span class="status-pill status-{{ order.status|lower }}">{{ order.status }}</span>
                    <div class="text-right mt-1 font-bold">₹{{ order.total_amount }}</div>
                </div>
            </div>

            <div class="flex flex-col gap-2">
                {% for item in order.items.all %}
                <div class="flex justify-between items-center text-sm">
                    <span>{{ item.book.title }} x {{ item.quantity }}</span>
                    <span>₹{{ item.price }}</span>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="text-center py-12">
        <i class="fa-solid fa-box-open fa-3x text-muted mb-4"></i>
        <p class="text-muted">You haven't placed any orders yet.</p>
        <a href="{% url 'home' %}" class="btn btn-primary mt-4">Start Shopping</a>
    </div>
    {% endif %}
</div>

<style>
    .status-pill {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 700;
        text-transform: uppercase;
    }

    .status-pending {
        background: #fef9c3;
        color: #854d0e;
    }

    .status-confirmed {
        background: #dbeafe;
        color: #1e40af;
    }

    .status-shipped {
        background: #e0e7ff;
        color: #3730a3;
    }

    .status-delivered {
        background: #dcfce7;
        color: #166534;
    }
</style>
{% endblock %}